<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Canvas tutorial template</title>
    <script type="text/javascript">
    var speedX = 3.0;
    var speedY = 4.0;
    var locX = 200;
    var locY = 150;
    var ctx;
 
    function init(){
    var canvas = document.getElementById('canvas');
    if (canvas.getContext){
    ctx = canvas.getContext('2d');
    setInterval(draw, 33); //function, 33ms
    }
    }
 
    function draw(){
    canvas.width = canvas.width;  //画面更新の裏技
    //ctx.globalCompositeOperation = "source-over"; //重要
    //ctx.fillStyle = "rgba(8,8,12,.2)"; //background color
    //ctx.fillRect(0, 0, 400, 300);
    //ctx.globalCompositeOperation = "lighter";

    //位置を更新
    locX += speedX;
    locY += speedY;
    
    if(locX < 3 || locX > 397){
        speedX *= -1;
    }
 
    if(locY < 3 || locY > 297){
        speedY *= -1;
    }
    
    //更新した座標で円を描く
    ctx.beginPath();
        ctx.fillStyle = '#3399FF';
        ctx.arc(locX, locY, 4, 0, Math.PI*2.0, true);
        ctx.fill();
    }
    </script>
    <style type="text/css">
      canvas { border: 1px solid #000; }
    </style>
  </head>
  <body onload="init()">
    <canvas id="canvas" width="400" height="300"></canvas>
  </body>
</html>
